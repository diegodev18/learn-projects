<h1>Lista de Carros</h1>

@if (loading) {
    <div class="loading">Cargando...</div>
} @else {
    <ul id="car-list">
        @for (car of cars; track car.id) {
            <li class="car-item">
                {{ car.model }} - {{ car.brand }} ({{ car.year }})
                <div class="car-actions">
                    <button class="edit-car" (click)="setEditingCar(car.id)" [disabled]="loading">Editar</button>
                    <button class="remove-car" (click)="removeCar(car.id, $index)" [disabled]="loading">Remover</button>
                </div>
            </li>
        } @empty {
            <li>No hay carros disponibles</li>
        }
    </ul>
}

<form id="car-form" action="">
    <div>
        <label for="model">Modelo:</label>
        <input type="text" id="model" [(ngModel)]="car.model" name="model" required [disabled]="loading">
    </div>

    <div>
        <label for="brand">Marca:</label>
        <input type="text" id="brand" [(ngModel)]="car.brand" name="brand" required [disabled]="loading">
    </div>

    <div>
        <label for="year">AÃ±o:</label>
        <input type="number" id="year" [(ngModel)]="car.year" name="year" required [disabled]="loading">
    </div>

    <button (click)="action === 'adding' ? addCar() : editCar(car.id)" type="button" [disabled]="loading">
        {{ loading ? 'Procesando...' : (action === 'adding' ? 'Agregar Carro' : 'Guardar Cambios') }}
    </button>
</form>

<p *ngIf="error" id="error-message">{{ error }}</p>